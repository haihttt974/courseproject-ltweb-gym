@model gym.Data.Package
@{
    ViewData["Title"] = "Xác nhận đăng ký";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var isPT = Model.Type == "Huấn luyện cá nhân";
}

<div class="container mt-4">
    <h2 class="text-center text-primary">Xác nhận đăng ký gói tập</h2>

    <div class="card mx-auto mt-4 shadow p-4" style="max-width: 600px;">
        <h4 class="card-title text-info">@Model.Name</h4>
        <p><strong>Loại:</strong> @Model.Type</p>
        <p><strong>Giá:</strong> @Model.Price?.ToString("N0") VNĐ</p>
        <p><strong>Thời gian:</strong> @Model.DurationInDays ngày</p>
        <p><strong>Mô tả:</strong> @Model.Description</p>

        <form asp-action="ConfirmRegister" method="post">
            <input type="hidden" name="packageId" value="@Model.PackageId" />

            @if (isPT)
            {
                <div class="form-group mt-3">
                    <label for="trainerId"><strong>Chọn Huấn luyện viên:</strong></label>
                    <select class="form-control" name="trainerId" required>
                        <option disabled selected>-- Chọn huấn luyện viên --</option>
                        @foreach (var trainer in ViewBag.Trainers as List<gym.Data.Trainer>)
                        {
                            <option value="@trainer.TrainerId">
                                @trainer.FullName - @trainer.Specialty
                            </option>
                        }
                    </select>
                </div>
            }

            <div class="d-flex justify-content-between mt-4">
                <a asp-action="Index" class="btn btn-secondary">Quay lại</a>
                <button type="submit" class="btn btn-success">Xác nhận đăng ký</button>
            </div>
        </form>
    </div>
</div>
@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/toastr@2.1.4/build/toastr.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/toastr@2.1.4/build/toastr.min.css" rel="stylesheet" />

    <script>
        toastr.options = {
            "closeButton": true,
            "debug": false,
            "newestOnTop": true,
            "progressBar": true,               // ✅ Hiện thanh tiến trình
            "positionClass": "toast-bottom-right",
            "preventDuplicates": false,
            "onclick": null,
            "showDuration": "300",
            "hideDuration": "1000",
            "timeOut": "5000",                 // ✅ Thời gian hiển thị: 5 giây
            "extendedTimeOut": "1000",
            "showEasing": "swing",
            "hideEasing": "linear",
            "showMethod": "fadeIn",
            "hideMethod": "fadeOut"
        };

        $(function () {
            @if (TempData["Success"] != null)
            {
                    <text>toastr.success("@TempData["Success"]");</text>
            }
            @if (TempData["Error"] != null)
            {
                    <text>toastr.error("@TempData["Error"]");</text>
            }
        });
    </script>
}